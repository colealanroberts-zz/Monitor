$(function(){function t(){var t,o,n,a,e,s,i;return t=$(".navbar"),o=$(".stock__list"),n=t.height(),a=o.height(),e=n+a,s=$(window).height(),i=s-(e+46)}function o(){return window.devicePixelRatio>1||2===window.devicePixelRatio?!0:void 0}function n(){var t=$(".loader"),n=o(),a;a=n===!0?80:40,t.circleProgress({value:1,size:a,thickness:5,lineCap:"round",emptyFill:"rgba(255, 255, 255, 0.1)",fill:{gradient:["#5BD8E4","#0099FF"]},animation:{duration:k},animationStartValue:0})}function a(){return A.length}function e(t){var o=["","K","M","B","T"],n=Math.floor((""+t).length/3),a=parseFloat((0!==n?t/Math.pow(1e3,n):t).toPrecision(2));return a%1!=0&&(shortNum=a.toFixed(1)),a+o[n]}function s(o){var n,a;n=o,a=t(),console.log(n);var e=n.Dates,s=n.Elements[0].DataSeries.close.values,n={labels:e,series:[s]},i={height:a,stretch:!0,showPoint:!1,fullWidth:!0};new Chartist.Line(".chart-history",n,i)}function i(t){var o=$(".stock__list"),n=t;console.log(n);var a=e(n.MarketCap);o.append('<li class="stock__company" data-symbol="'+n.Symbol+'"><span class="stock__row stock__row--name">'+n.Name+'</span> <span class="stock__row stock__row--sym">'+n.Symbol+'</span> <span class="stock__row stock__row--market-cap">$'+a+'</span> <span class="stock__row stock__row--change-pct">$'+n.Change.toFixed(2)+" :: "+n.ChangePercent.toFixed(2)+'%</span> <span class="stock__row stock__row--last-price>$'+n.LastPrice+"</li>")}function c(){for(var t=0;t<stockArrayLength;t++)l(A[t])}function r(){var t=$(".stock__company");t.each(function(t){var o=$(this);setTimeout(function(){o.addClass("active")},200*t)})}function l(t){$.ajax({url:y+t,type:"GET",contentType:"application/json",dataType:"jsonp"}).done(function(t){r(),i(t),u()}).fail(function(t,o,n){console.log(t+o+n)})}function p(){var t=$(this).data("symbol");$.ajax({url:w+t+g,type:"GET",contentType:"application/json",dataType:"jsonp"}).done(function(t){s(t),p()}).fail(function(t,o,n){console.log(t+o+n)})}function u(){$(".stock__company").unbind().click(function(t){t.preventDefault()})}var d,h=1e3,f=6e4,m=30,_=3*m,v=365,k=f/2,y="http://dev.markitondemand.com/Api/v2/Quote/jsonp?symbol=",w="http://dev.markitondemand.com/Api/v2/InteractiveChart/jsonp?parameters=%7B%22Normalized%22%3Afalse%2C%22NumberOfDays%22%3A90%2C%22DataPeriod%22%3A%22Day%22%2C%22Elements%22%3A%5B%7B%22Symbol%22%3A%22",g="%22%2C%22Type%22%3A%22price%22%2C%22Params%22%3A%5B%22c%22%5D%7D%5D%7D",A=["TWTR","GOOG","AAPL","GPRO","GE","SQ","PAA","T","A","MCK","IP","RTN","X","TSO","ESRX","FCX","AET","JCP","DD","VZ"];A.sort(),stockArrayLength=a(),d=t(),r(),c(),n(),setInterval(function(){c(),n()},k)});