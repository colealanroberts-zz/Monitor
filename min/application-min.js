$(function(){function o(){var o,a,t,n,e,i,s,c,r;return o=$(".navbar"),a=$(".stock__list"),t=$(".attribution"),n=$(".company-info"),e=o.height(),i=a.height(),aH=t.height(),cIH=n.height(),console.log(cIH),s=e+i+aH+cIH,c=$(window).height(),r=c-s}function a(){return window.devicePixelRatio>1||2===window.devicePixelRatio?!0:void 0}function t(){var o=$(".loader"),t=a(),n;n=t===!0?80:40,o.circleProgress({value:1,size:n,thickness:5,lineCap:"round",emptyFill:"rgba(255, 255, 255, 0.1)",fill:{gradient:["#5BD8E4","#0099FF"]},animation:{duration:x},animationStartValue:0})}function n(){return j.length}function e(o){var a=["","K","M","B","T"],t=Math.floor((""+o).length/3),n=parseFloat((0!==t?o/Math.pow(1e3,t):o).toPrecision(2));return n%1!=0&&(shortNum=n.toFixed(1)),n+a[t]}function i(a){var t,n;t=a,console.log(t),n=o();var e=$(".company-info__symbol"),i=$(".company-info__price--min"),s=$(".company-info__price--max");e.html(t.Elements[0].Symbol),i.html("Min: $"+t.Elements[0].DataSeries.close.min),s.html("Max: $"+t.Elements[0].DataSeries.close.max);var c=t.Dates,r=t.Elements[0].DataSeries.close.values,t={labels:c,series:[r]},l={height:n+"px",stretch:!0,showPoint:!1,fullWidth:!0};new Chartist.Line(".chart-history",t,l)}function s(o){var a=$(".stock__list"),t=o;console.log(t);var n=e(t.MarketCap);a.append('<li class="stock__company" data-symbol="'+t.Symbol+'"><span class="stock__row stock__row--name">'+t.Name+'</span> <span class="stock__row stock__row--sym">'+t.Symbol+'</span> <span class="stock__row stock__row--market-cap">$'+n+'</span> <span class="stock__row stock__row--change-pct">$'+t.Change.toFixed(2)+" :: "+t.ChangePercent.toFixed(2)+'%</span> <span class="stock__row stock__row--last-price>$'+t.LastPrice+"</li>")}function c(){for(var o=0;o<stockArrayLength;o++)p(j[o])}function r(){var o=$(".stock__company");o.each(function(o){var a=$(this);setTimeout(function(){a.addClass("active")},150*o)})}function l(o,a){k.html(o),g.html(a),u.addClass("modal-active"),y.addClass("show"),v.show()}function m(){y.hide(),v.hide()}function p(o){$.ajax({url:P+o,type:"GET",contentType:"application/json",dataType:"jsonp"}).done(function(o){m(),r(),s(o),d()}).fail(function(o,a,t){console.log(o+a+t)})}function h(){var o=$(this).data("symbol");$.ajax({url:T+o+S,type:"GET",contentType:"application/json",dataType:"jsonp"}).done(function(o){i(o)}).fail(function(o,a,t){console.log(o+a+t)})}function d(){$(".stock__company").unbind().click(h)}var _,u,f,y,v,k,g;u=$("body"),f=$(".chart-history"),y=$(".modal"),v=$(".modal__overlay"),k=$(".modal__header"),g=$(".modal__body");var w=1e3,b=6e4,C=30,A=3*C,D=365,x=b/2,P="http://dev.markitondemand.com/Api/v2/Quote/jsonp?symbol=",T="http://dev.markitondemand.com/Api/v2/InteractiveChart/jsonp?parameters=%7B%22Normalized%22%3Afalse%2C%22NumberOfDays%22%3A90%2C%22DataPeriod%22%3A%22Day%22%2C%22Elements%22%3A%5B%7B%22Symbol%22%3A%22",S="%22%2C%22Type%22%3A%22price%22%2C%22Params%22%3A%5B%22c%22%5D%7D%5D%7D",j=["TWTR","GOOG","AAPL","GPRO","SQ","SBUX"];j.sort(),stockArrayLength=n(),_=o(),r(),c(),t(),setInterval(function(){c(),t()},x)});