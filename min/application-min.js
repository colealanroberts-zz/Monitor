$(function(){function o(){var o,t,a,n,e,i,s,c,r;return o=$(".navbar"),t=$(".stock__list"),a=$(".attribution"),n=$(".company-info"),e=o.height(),i=t.height(),aH=a.height(),cIH=n.height(),s=e+i+aH+cIH,c=$(window).height(),r=c-s}function t(){return window.devicePixelRatio>1||2===window.devicePixelRatio?!0:void 0}function a(){var o=$(".loader"),a=t(),n;n=a===!0?80:40,o.circleProgress({value:1,size:n,thickness:5,lineCap:"round",emptyFill:"rgba(255, 255, 255, 0.1)",fill:{gradient:["#5BD8E4","#0099FF"]},animation:{duration:P},animationStartValue:0})}function n(){return j.length}function e(o){var t=["","K","M","B","T"],a=Math.floor((""+o).length/3),n=parseFloat((0!==a?o/Math.pow(1e3,a):o).toPrecision(2));return n%1!=0&&(shortNum=n.toFixed(1)),n+t[a]}function i(t){var a,n;a=t,console.log(a),n=o();var e=$(".company-info__symbol"),i=$(".company-info__price--min"),s=$(".company-info__price--max");e.html(a.Elements[0].Symbol),i.html("$"+a.Elements[0].DataSeries.close.min),s.html("$"+a.Elements[0].DataSeries.close.max);var c=a.Dates,r=a.Elements[0].DataSeries.close.values,a={labels:c,series:[r]},l={height:n,stretch:!0,showPoint:!1,fullWidth:!0};new Chartist.Line(".chart-history",a,l)}function s(o){var t=$(".stock__list"),a=o;console.log(a);var n=e(a.MarketCap);t.append('<li class="stock__company" data-symbol="'+a.Symbol+'"><span class="stock__row stock__row--name">'+a.Name+'</span> <span class="stock__row stock__row--sym">'+a.Symbol+'</span> <span class="stock__row stock__row--market-cap">$'+n+'</span> <span class="stock__row stock__row--change-pct">$'+a.Change.toFixed(2)+" :: "+a.ChangePercent.toFixed(2)+'%</span> <span class="stock__row stock__row--last-price>$'+a.LastPrice+"</li>")}function c(){for(var o=0;o<stockArrayLength;o++)p(j[o])}function r(){var o=$(".stock__company");o.each(function(o){var t=$(this);setTimeout(function(){t.addClass("active")},150*o)})}function l(o,t){k.html(o),w.html(t),u.addClass("modal-active"),y.addClass("show"),v.show()}function m(){y.hide(),v.hide()}function p(o){$.ajax({url:T+o,type:"GET",contentType:"application/json",dataType:"jsonp"}).done(function(o){m(),r(),s(o),d()}).fail(function(o,t,a){console.log(o+t+a)})}function h(){var o=$(this).data("symbol");$.ajax({url:S+o+x,type:"GET",contentType:"application/json",dataType:"jsonp"}).done(function(o){i(o)}).fail(function(o,t,a){console.log(o+t+a)})}function d(){$(".stock__company").unbind().click(h)}var _,u,f,y,v,k,w;u=$("body"),f=$(".chart-history"),y=$(".modal"),v=$(".modal__overlay"),k=$(".modal__header"),w=$(".modal__body");var g=1e3,b=6e4,C=30,A=3*C,D=365,P=b/2,T="http://dev.markitondemand.com/Api/v2/Quote/jsonp?symbol=",S="http://dev.markitondemand.com/Api/v2/InteractiveChart/jsonp?parameters=%7B%22Normalized%22%3Afalse%2C%22NumberOfDays%22%3A90%2C%22DataPeriod%22%3A%22Day%22%2C%22Elements%22%3A%5B%7B%22Symbol%22%3A%22",x="%22%2C%22Type%22%3A%22price%22%2C%22Params%22%3A%5B%22c%22%5D%7D%5D%7D",j=["TWTR","GOOG","AAPL","GPRO","SQ","SBUX"];j.sort(),stockArrayLength=n(),_=o(),r(),c(),a(),setInterval(function(){c(),a()},P)});